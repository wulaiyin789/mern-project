{"version":3,"sources":["shared/components/UIElmenets/Card/Card.js","places/pages/UpdatePlace/UpdatePlace.js"],"names":["Card","props","className","style","children","UpdatePlace","auth","useContext","AuthContext","useHttpClient","isLoading","error","sendReq","clearError","useState","loadedPlace","setLoadedPLace","history","useHistory","placeId","useParams","useForm","title","value","isValid","description","formState","inputHandler","setFormData","useEffect","a","process","responseData","place","fetchPlaces","placeUpdateSubmitHandler","e","preventDefault","JSON","stringify","inputs","Authorization","token","push","userId","onClear","onSubmit","id","element","type","label","validators","VALIDATOR_REQUIRE","errorText","onInput","initialValue","initialValid","VALIDATOR_MINLENGTH","disabled"],"mappings":"qGAAA,0BAYeA,IARF,SAACC,GACV,OACI,yBAAKC,UAAS,eAAUD,EAAMC,WAAaC,MAAOF,EAAME,OACnDF,EAAMG,Y,2NCoIJC,UA1HK,WAChB,IAAMC,EAAOC,qBAAWC,KADF,EAE4BC,cAA1CC,EAFc,EAEdA,UAAWC,EAFG,EAEHA,MAAOC,EAFJ,EAEIA,QAASC,EAFb,EAEaA,WAFb,EAGgBC,qBAHhB,mBAGfC,EAHe,KAGFC,EAHE,KAIhBC,EAAUC,cAEVC,EAAUC,cAAYD,QANN,EAQ0BE,YAC5C,CACIC,MAAO,CACHC,MAAO,GACPC,SAAS,GAEbC,YAAa,CACTF,MAAO,GACPC,SAAS,KAGjB,GAnBkB,mBAQfE,EARe,KAQJC,EARI,KAQWC,EARX,KAsBtBC,qBAAU,YACW,uCAAG,4BAAAC,EAAA,+EAEelB,EAAQ,GAAD,OAAImB,uDAAJ,mBAAgDZ,IAFtE,OAENa,EAFM,OAIZhB,EAAegB,EAAaC,OAC5BL,EACI,CACIN,MAAO,CACHC,MAAOS,EAAaC,MAAMX,MAC1BE,SAAS,GAEbC,YAAa,CACTF,MAAOS,EAAaC,MAAMR,YAC1BD,SAAS,KAGjB,GAhBQ,yGAAH,qDAqBjBU,KACD,CAACtB,EAASO,EAASS,IAEtB,IAAMO,EAAwB,uCAAG,WAAOC,GAAP,SAAAN,EAAA,6DAC7BM,EAAEC,iBAD2B,kBAInBzB,EAAQ,GAAD,OACNmB,uDADM,mBACsCZ,GAC/C,QACAmB,KAAKC,UAAU,CACXjB,MAAOI,EAAUc,OAAOlB,MAAMC,MAC9BE,YAAaC,EAAUc,OAAOf,YAAYF,QAE9C,CACI,eAAgB,mBAChBkB,cAAe,UAAYnC,EAAKoC,QAbf,OAiBzBzB,EAAQ0B,KAAK,IAAMrC,EAAKsC,OAAS,WAjBR,uGAAH,sDAqB9B,OAAIlC,EAEI,yBAAKR,UAAU,UACX,kBAAC,IAAD,OAKPa,GAAgBJ,EAWjB,kBAAC,WAAD,KACI,kBAAC,IAAD,CAAYA,MAAOA,EAAOkC,QAAShC,KACjCH,GAAaK,GACX,0BAAMb,UAAU,aAAa4C,SAAUX,GACnC,kBAAC,IAAD,CACIY,GAAG,QACHC,QAAQ,OACRC,KAAK,QACLC,MAAM,QACNC,WAAY,CAACC,eACbC,UAAU,8BACVC,QAAS3B,EACT4B,aAAcxC,EAAYO,MAC1BkC,cAAc,IAGlB,kBAAC,IAAD,CACIT,GAAG,cACHC,QAAQ,WACRE,MAAM,cACNC,WAAY,CAACM,YAAoB,IACjCJ,UAAU,4DACVC,QAAS3B,EACT4B,aAAcxC,EAAYU,YAC1B+B,cAAc,IAElB,kBAAC,IAAD,CAAQP,KAAK,SAASS,UAAWhC,EAAUF,SAA3C,kBAnCR,yBAAKtB,UAAU,UACX,kBAAC,IAAD,KACI","file":"static/js/8.b7eff864.chunk.js","sourcesContent":["import React from 'react';\n\nimport './Card.css';\n\nconst Card = (props) => {\n    return (\n        <div className={`card ${props.className}`} style={props.style}>\n            {props.children}\n        </div>\n    );\n};\n\nexport default Card;\n","import React, { useState, useEffect, Fragment, useContext } from 'react';\r\nimport { useParams, useHistory } from 'react-router-dom';\r\nimport { useForm } from '../../../shared/hooks/useForm/useForm';\r\n\r\nimport Button from '../../../shared/components/FormElements/Button/Button';\r\nimport Input from '../../../shared/components/FormElements/Input/Input';\r\nimport Card from '../../../shared/components/UIElmenets/Card/Card';\r\nimport ErrorModal from '../../../shared/components/UIElmenets/ErrorModal/ErrorModal';\r\nimport LoadingSpinner from '../../../shared/components/UIElmenets/LoadingSpinner/LoadingSpinner';\r\n\r\nimport { VALIDATOR_REQUIRE, VALIDATOR_MINLENGTH } from '../../../shared/util/validators';\r\n\r\nimport { useHttpClient } from '../../../shared/hooks/useHttp/useHttp';\r\nimport { AuthContext } from '../../../shared/context/auth-context';\r\n\r\nimport '../PlaceForm.css';\r\n\r\nconst UpdatePlace = () => {\r\n    const auth = useContext(AuthContext);\r\n    const { isLoading, error, sendReq, clearError } = useHttpClient();\r\n    const [loadedPlace, setLoadedPLace] = useState();\r\n    const history = useHistory();\r\n\r\n    const placeId = useParams().placeId;\r\n\r\n    const [formState, inputHandler , setFormData] = useForm(\r\n        {\r\n            title: {\r\n                value: '',\r\n                isValid: true\r\n            },\r\n            description: {\r\n                value: '',\r\n                isValid: true\r\n            }\r\n        },\r\n        false\r\n    );\r\n\r\n    useEffect(() => {\r\n        const fetchPlaces = async () => {\r\n            try {\r\n                const responseData = await sendReq(`${process.env.REACT_APP_BACKEND_URL}/places/${placeId}`);\r\n\r\n                setLoadedPLace(responseData.place);\r\n                setFormData(\r\n                    {\r\n                        title: {\r\n                            value: responseData.place.title,\r\n                            isValid: true\r\n                        },\r\n                        description: {\r\n                            value: responseData.place.description,\r\n                            isValid: true\r\n                        }\r\n                    },\r\n                    true\r\n                );\r\n            } catch (err) {}\r\n        };\r\n\r\n        fetchPlaces();\r\n    }, [sendReq, placeId, setFormData]);\r\n\r\n    const placeUpdateSubmitHandler = async (e) => {\r\n        e.preventDefault();\r\n\r\n        try {\r\n            await sendReq(\r\n                `${process.env.REACT_APP_BACKEND_URL}/places/${placeId}`,\r\n                'PATCH',\r\n                JSON.stringify({\r\n                    title: formState.inputs.title.value,\r\n                    description: formState.inputs.description.value\r\n                }),\r\n                {\r\n                    'Content-Type': 'application/json',\r\n                    Authorization: 'Bearer ' + auth.token\r\n                }\r\n            );\r\n\r\n            history.push('/' + auth.userId + '/places');\r\n        } catch (err) {}\r\n    };\r\n\r\n    if (isLoading) {\r\n        return (\r\n            <div className='center'>\r\n                <LoadingSpinner />\r\n            </div>\r\n        );\r\n    }\r\n\r\n    if (!loadedPlace && !error) {\r\n        return (\r\n            <div className='center'>\r\n                <Card>\r\n                    <h2>Cannot find place!</h2>\r\n                </Card>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <Fragment>\r\n            <ErrorModal error={error} onClear={clearError} />\r\n            {!isLoading && loadedPlace && (\r\n                <form className='place-form' onSubmit={placeUpdateSubmitHandler}>\r\n                    <Input\r\n                        id='title'\r\n                        element='type'\r\n                        type='input'\r\n                        label='Title'\r\n                        validators={[VALIDATOR_REQUIRE()]}\r\n                        errorText='Please enter a valid title.'\r\n                        onInput={inputHandler}\r\n                        initialValue={loadedPlace.title}\r\n                        initialValid={true}\r\n                    />\r\n\r\n                    <Input\r\n                        id='description'\r\n                        element='textarea'\r\n                        label='Description'\r\n                        validators={[VALIDATOR_MINLENGTH(5)]}\r\n                        errorText='Please enter a value description (At least 5 Characters).'\r\n                        onInput={inputHandler}\r\n                        initialValue={loadedPlace.description}\r\n                        initialValid={true}\r\n                    />\r\n                    <Button type='submit' disabled={!formState.isValid}>\r\n                        UPDATE PLACE\r\n                    </Button>\r\n                </form>\r\n            )}\r\n        </Fragment>\r\n    );\r\n};\r\n\r\nexport default UpdatePlace;\r\n\r\n// const DUMMY_PLACES = [\r\n//     {\r\n//         id: 'p1',\r\n//         title: 'Hong Kong Building',\r\n//         description: 'The tallest building in the history!',\r\n//         imageUrl:\r\n//             'https://upload.wikimedia.org/wikipedia/commons/thumb/5/5d/IFC%2C_Hong_Kong_Island_%282796343561%29.jpg/452px-IFC%2C_Hong_Kong_Island_%282796343561%29.jpg',\r\n//         address: '8 Finance St, Central',\r\n//         location: {\r\n//             lat: 22.28588,\r\n//             lng: 114.158131\r\n//         },\r\n//         creator: 'u1'\r\n//     },\r\n//     {\r\n//         id: 'p2',\r\n//         title: 'Hong Kong Building',\r\n//         description: 'The tallest building in the history!',\r\n//         imageUrl:\r\n//             'https://upload.wikimedia.org/wikipedia/commons/thumb/5/5d/IFC%2C_Hong_Kong_Island_%282796343561%29.jpg/452px-IFC%2C_Hong_Kong_Island_%282796343561%29.jpg',\r\n//         address: '8 Finance St, Central',\r\n//         location: {\r\n//             lat: 22.28588,\r\n//             lng: 114.158131\r\n//         },\r\n//         creator: 'u2'\r\n//     }\r\n// ];\r\n"],"sourceRoot":""}